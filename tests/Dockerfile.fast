# Fast Dockerfile that uses pre-built base
# Requires: docker build -t dotfiles-base -f tests/Dockerfile.base .
FROM dotfiles-base

# Copy dotfiles (this is the only thing that changes)
COPY --chown=testuser:testuser . ./dotfiles/

# Run installation
RUN cd dotfiles && ./tests/install-platform-agnostic.sh

# Force color output in Docker
ENV TERM=xterm-256color
ENV FORCE_COLOR=1

# Set entrypoint
ENTRYPOINT ["./dotfiles/tests/run-tests.sh"]